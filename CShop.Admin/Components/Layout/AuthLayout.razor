@attribute [AllowAnonymous]
@using CShop.Admin.Services
@inherits LayoutComponentBase
@inject ThemeService ThemeService

<MudThemeProvider Theme="@_theme" IsDarkMode="@ThemeService.IsDarkMode" />
<MudPopoverProvider />
<MudDialogProvider FullWidth="true" MaxWidth="MaxWidth.Small" />
<MudSnackbarProvider />

<MudMainContent>
    @Body
</MudMainContent>


@code {
    private MudTheme? _theme = null;

    protected override void OnInitialized()
    {
        _theme = new()
        {
            PaletteLight = ThemeService._lightPalette,
            PaletteDark = ThemeService._darkPalette,
            LayoutProperties = new LayoutProperties()
        };

        // Subscribing to theme change to trigger StateHasChanged
        ThemeService.OnChange += async () => await InvokeAsync(StateHasChanged);
    }
}
